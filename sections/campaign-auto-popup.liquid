{%- unless request.design_mode == false and section.settings.disable_for_holder and customer != blank -%}
  {%- if section.settings.show_button -%}
    <modal-opener
      id="Campaign-AutoPopup-Opener"
      class="campaign-opener-button button button--shadow button--no-animation position--{{ section.settings.button_position | default: 'left' }}"
      role="button"
      aria-haspopup="dialog"
      aria-expanded="false"
      aria-controls="Campaign-AutoPopup"
      tabindex="0"
      style="--color-button: {{ section.settings.button_background_color.red }}, {{ section.settings.button_background_color.green }}, {{ section.settings.button_background_color.blue }}; --color-button-text: {{ section.settings.button_foreground_color.red }}, {{ section.settings.button_foreground_color.green }}, {{ section.settings.button_foreground_color.blue }};"
    >
      <span
        class="close-opener-button button button--mini button--float button--icon button--pill"
        role="button"
        aria-label="{{ 'accessibility.close' | t }}"
        tabindex="0"
        onclick="event.stopPropagation(); this.closest('modal-opener').remove();"
      >
        {% render 'icon-sets-basic', icon: 'close' %}
      </span>
      {%- if section.settings.button_icon != 'none' -%}
        {% render 'icon-sets', icon: section.settings.button_icon %}
      {%- endif -%}
      {{ section.settings.button_label }}
    </modal-opener>
  {%- endif -%}
  <autopopup-modal
    id="Campaign-AutoPopup"
    class="campaign-auto-popup auto-popup modal position--{{ section.settings.position }}"
    data-section="{{ section.id }}"
    data-delay="{{ section.settings.delay }}"
    data-frequency="{{ section.settings.frequency }}"
  >
    <div class="modal-overlay"></div>
    <div
      class="modal-inner{% if section.settings.image != blank %} has-image{% endif %} color-{{ section.settings.color_scheme }} gradient focus-none"
      role="dialog"
      data-trap
      aria-modal="true"
      aria-label="{{ 'sections.popup_newsletter.modal' | t }}"
      tabindex="-1"
    >
      <button
        class="modal-close-button button button--icon button--pill button--air focus-inset"
        type="button"
        aria-label="{{ 'accessibility.close' | t }}"
        onclick="this.closest('autopopup-modal').hide()"
      >
        {% render 'icon-sets-basic', icon: 'close' %}
      </button>
      <div class="modal-content">
        {%- if section.settings.image != blank -%}
          <div class="campaign-image media media--square small-hide">
            {% render 'lazy-image', image_object: section.settings.image, sizes: '500px' %}
          </div>
        {%- endif -%}
        <div class="campaign-content">
          <div class="content-group width--small text-align--{{ section.settings.alignment | default: 'center' }}">
            {% content_for 'blocks' %}
          </div>
        </div>
      </div>
    </div>
  </autopopup-modal>
  <script src="{{ 'autopopup-modal.js' | asset_url }}" defer="defer"></script>
{%- endunless -%}
{% schema %}
{
  "name": "t:sections.campaign-popup.name",
  "class": "section-modal",
  "tag": "div",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "position",
      "label": "t:sections.all.position.label",
      "info": "t:sections.all.desktop.effect.info",
      "options": [
        {
          "value": "left",
          "label": "t:sections.all.position.options__7.label"
        },
        {
          "value": "center",
          "label": "t:sections.all.position.options__5.label"
        },
        {
          "value": "right",
          "label": "t:sections.all.position.options__9.label"
        }
      ],
      "default": "right"
    },
    {
      "type": "checkbox",
      "id": "disable_for_holder",
      "label": "t:sections.campaign-popup.settings.disable_for_holder.label",
      "default": true,
      "info": "t:sections.campaign-popup.settings.disable_for_holder.info"
    },
    {
      "type": "range",
      "id": "delay",
      "label": "t:sections.campaign-popup.settings.delay.label",
      "min": 0,
      "max": 60,
      "unit": "s",
      "step": 1,
      "default": 10,
      "info": "t:sections.campaign-popup.settings.delay.info"
    },
    {
      "type": "range",
      "id": "frequency",
      "label": "t:sections.campaign-popup.settings.frequency.label",
      "min": 1,
      "max": 30,
      "unit": "day",
      "step": 1,
      "default": 7
    },
    {
      "type": "text_alignment",
      "id": "alignment",
      "label": "t:sections.all.text-alignment.label",
      "default": "center"
    },
    {
      "type": "header",
      "content": "t:sections.all.image.header_content"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.all.image.image_picker.label",
      "info": "t:sections.campaign-popup.settings.image.info"
    },
    {
      "type": "header",
      "content": "t:sections.campaign-popup.settings.header_float_button.content"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "t:sections.campaign-popup.settings.show_button.label",
      "default": true
    },
    {
      "type": "select",
      "id": "button_position",
      "label": "t:sections.campaign-popup.settings.button_position.label",
      "options": [
        {
          "value": "left",
          "label": "t:sections.campaign-popup.settings.button_position.options__1.label"
        },
        {
          "value": "right",
          "label": "t:sections.campaign-popup.settings.button_position.options__2.label"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "button_icon",
      "label": "t:sections.all.icon.label",
      "default": "none",
      "options": [
        {
          "value": "none",
          "label": "t:sections.all.icon.none.label"
        },
        {
          "group": "t:sections.all.icon.groups.shop",
          "value": "cart",
          "label": "t:sections.all.icon.cart.label"
        },
        {
          "group": "t:sections.all.icon.groups.shop",
          "value": "wish",
          "label": "t:sections.all.icon.wish.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "thumb",
          "label": "t:sections.all.icon.thumb.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "author",
          "label": "t:sections.all.icon.author.label"
        },
        {
          "group": "t:sections.all.icon.groups.shop",
          "value": "sale",
          "label": "t:sections.all.icon.sale.label"
        },
        {
          "group": "t:sections.all.icon.groups.shop",
          "value": "new",
          "label": "t:sections.all.icon.new.label"
        },
        {
          "group": "t:sections.all.icon.groups.shop",
          "value": "hot",
          "label": "t:sections.all.icon.hot.label"
        },
        {
          "group": "t:sections.all.icon.groups.shop",
          "value": "gift",
          "label": "t:sections.all.icon.gift.label"
        },
        {
          "group": "t:sections.all.icon.groups.shipping",
          "value": "global",
          "label": "t:sections.all.icon.global.label"
        },
        {
          "group": "t:sections.all.icon.groups.shipping",
          "value": "truck",
          "label": "t:sections.all.icon.truck.label"
        },
        {
          "group": "t:sections.all.icon.groups.shipping",
          "value": "plane",
          "label": "t:sections.all.icon.plane.label"
        },
        {
          "group": "t:sections.all.icon.groups.shipping",
          "value": "steamer",
          "label": "t:sections.all.icon.steamer.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "track",
          "label": "t:sections.all.icon.track.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "return",
          "label": "t:sections.all.icon.return.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "refund",
          "label": "t:sections.all.icon.refund.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "preorder",
          "label": "t:sections.all.icon.preorder.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "security",
          "label": "t:sections.all.icon.security.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "guarantee",
          "label": "t:sections.all.icon.guarantee.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "card",
          "label": "t:sections.all.icon.card.label"
        },
        {
          "group": "t:sections.all.icon.groups.order",
          "value": "money",
          "label": "t:sections.all.icon.money.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "address",
          "label": "t:sections.all.icon.address.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "phone",
          "label": "t:sections.all.icon.phone.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "email",
          "label": "t:sections.all.icon.email.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "chat",
          "label": "t:sections.all.icon.chat.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "24h",
          "label": "t:sections.all.icon.24h.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "service",
          "label": "t:sections.all.icon.service.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "question",
          "label": "t:sections.all.icon.question.label"
        },
        {
          "group": "t:sections.all.icon.groups.communication",
          "value": "send",
          "label": "t:sections.all.icon.send.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "wifi",
          "label": "t:sections.all.icon.wifi.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "bluetooth",
          "label": "t:sections.all.icon.bluetooth.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "camera",
          "label": "t:sections.all.icon.camera.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "mouse",
          "label": "t:sections.all.icon.mouse.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "ar",
          "label": "t:sections.all.icon.ar.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "vr",
          "label": "t:sections.all.icon.vr.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "print",
          "label": "t:sections.all.icon.print.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "scan",
          "label": "t:sections.all.icon.scan.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "3d",
          "label": "t:sections.all.icon.3d.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "record",
          "label": "t:sections.all.icon.record.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "apple",
          "label": "t:sections.all.icon.apple.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "carrot",
          "label": "t:sections.all.icon.carrot.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "lemon",
          "label": "t:sections.all.icon.lemon.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "burger",
          "label": "t:sections.all.icon.burger.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "cake",
          "label": "t:sections.all.icon.cake.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "coffee",
          "label": "t:sections.all.icon.coffee.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "milk",
          "label": "t:sections.all.icon.milk.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "beer",
          "label": "t:sections.all.icon.beer.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "icecream",
          "label": "t:sections.all.icon.icecream.label"
        },
        {
          "group": "t:sections.all.icon.groups.food_drink",
          "value": "fork-spoon",
          "label": "t:sections.all.icon.fork-spoon.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "dress",
          "label": "t:sections.all.icon.dress.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "pants",
          "label": "t:sections.all.icon.pants.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "shoe",
          "label": "t:sections.all.icon.shoe.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "hat",
          "label": "t:sections.all.icon.hat.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "skirt",
          "label": "t:sections.all.icon.skirt.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "shorts",
          "label": "t:sections.all.icon.shorts.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "socks",
          "label": "t:sections.all.icon.socks.label"
        },
        {
          "group": "t:sections.all.icon.groups.clothing",
          "value": "bag",
          "label": "t:sections.all.icon.bag.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "diamond",
          "label": "t:sections.all.icon.diamond.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "eco-friendly",
          "label": "t:sections.all.icon.eco-friendly.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "clock",
          "label": "t:sections.all.icon.clock.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "calendar",
          "label": "t:sections.all.icon.calendar.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "ruler",
          "label": "t:sections.all.icon.ruler.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "eye",
          "label": "t:sections.all.icon.eye.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "bell",
          "label": "t:sections.all.icon.bell.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "light",
          "label": "t:sections.all.icon.light.label"
        },
        {
          "group": "t:sections.all.icon.groups.tech",
          "value": "battery",
          "label": "t:sections.all.icon.battery.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "star",
          "label": "t:sections.all.icon.star.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "book",
          "label": "t:sections.all.icon.book.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "quote",
          "label": "t:sections.all.icon.quote.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "yes",
          "label": "t:sections.all.icon.yes.label"
        },
        {
          "group": "t:sections.all.icon.groups.others",
          "value": "no",
          "label": "t:sections.all.icon.no.label"
        }
      ]
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "t:sections.all.button.button_label.label",
      "default": "Get 20% Off"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "t:sections.all.colors.background.label",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_foreground_color",
      "label": "t:sections.all.colors.foreground.label",
      "default": "#FFFFFF"
    }
  ],
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "_newsletter"
    }
  ]
}
{% endschema %}
