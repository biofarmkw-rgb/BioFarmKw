{%- if predictive_search.performed -%}
  {% comment %} 结果总数 {% endcomment %}
  {% assign total_results = predictive_search.resources.products.size
    | plus: predictive_search.resources.collections.size
    | plus: predictive_search.resources.articles.size
    | plus: predictive_search.resources.pages.size
  %}
  <div
    id="Predictive-Search-Results"
    class="predictive-search-results"
  >
    {%- if total_results > 0 -%}
      {%- if predictive_search.resources.queries.size > 0 -%}
        <div class="suggestion-searches">
          <div class="suggestion-title font-heading">{{ 'templates.search.suggestions' | t }}</div>
          <ul class="suggestion-list list-unstyled">
            {%- for query in predictive_search.resources.queries -%}
              <li>
                <a href="{{ query.url }}" class="link link-text">
                  {{ query.styled_text }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      {%- endif -%}

      <tab-panel class="tab-panel tab-style--line">
        <ul
          class="tab-panel-tabs list-unstyled"
          role="tablist"
        >
          {%- if predictive_search.resources.products.size > 0 -%}
            <li
              id="Search-Result-Products-Tab"
              class="tab focus-inset"
              role="tab"
              tabindex="0"
              aria-controls="Search-Result-Products-Panel"
            >
              {{ 'templates.search.type.products' | t }}
              <b class="count" aria-hidden="true">{{ predictive_search.resources.products.size }}</b>
              <span class="visually-hidden">
                {{- 'templates.search.results_with_count' | t: count: predictive_search.resources.products.size -}}
              </span>
            </li>
          {%- endif -%}
          {%- if predictive_search.resources.collections.size > 0 -%}
            <li
              id="Search-Result-Collections-Tab"
              class="tab focus-inset"
              role="tab"
              tabindex="0"
              aria-controls="Search-Result-Collections-Panel"
            >
              {{ 'templates.search.type.collections' | t }}
              <b class="count" aria-hidden="true">{{ predictive_search.resources.collections.size }}</b>
              <span class="visually-hidden">
                {{- 'templates.search.results_with_count' | t: count: predictive_search.resources.collections.size -}}
              </span>
            </li>
          {%- endif -%}
          {%- if predictive_search.resources.articles.size > 0 -%}
            <li
              id="Search-Result-Articles-Tab"
              class="tab focus-inset"
              role="tab"
              tabindex="0"
              aria-controls="Search-Result-Articles-Panel"
            >
              {{ 'templates.search.type.articles' | t }}
              <b class="count" aria-hidden="true">{{ predictive_search.resources.articles.size }}</b>
              <span class="visually-hidden">
                {{- 'templates.search.results_with_count' | t: count: predictive_search.resources.articles.size -}}
              </span>
            </li>
          {%- endif -%}
          {%- if predictive_search.resources.pages.size > 0 -%}
            <li
              id="Search-Result-Pages-Tab"
              class="tab focus-inset"
              role="tab"
              tabindex="0"
              aria-controls="Search-Result-Pages-Panel"
            >
              {{ 'templates.search.type.pages' | t }}
              <b class="count" aria-hidden="true">{{ predictive_search.resources.pages.size }}</b>
              <span class="visually-hidden">
                {{- 'templates.search.results_with_count' | t: count: predictive_search.resources.pages.size -}}
              </span>
            </li>
          {%- endif -%}
        </ul>
        <div class="tab-panel-panels">
          {%- if predictive_search.resources.products.size > 0 -%}
            <div
              id="Search-Result-Products-Panel"
              class="panel"
              role="tabpanel"
              aria-labelledby="Search-Result-Products-Tab"
              aria-hidden="true"
            >
              {%- for product in predictive_search.resources.products limit: 10 -%}
                {% render 'card-product',
                  card_product: product,
                  image_width: '200px',
                  image_width_mobile: '200px',
                  show_horizontal: true,
                  show_quick_add: true
                %}
              {%- endfor -%}
            </div>
          {%- endif -%}
          {%- if predictive_search.resources.collections.size > 0 -%}
            <div
              id="Search-Result-Collections-Panel"
              class="panel"
              role="tabpanel"
              aria-labelledby="Search-Result-Collections-Tab"
              aria-hidden="true"
            >
              {%- for collection in predictive_search.resources.collections -%}
                {% render 'card-collection',
                  card_collection: collection,
                  image_width: '200px',
                  image_width_mobile: '200px',
                  show_product_count: true,
                  show_horizontal: true
                %}
              {%- endfor -%}
            </div>
          {%- endif -%}
          {%- if predictive_search.resources.articles.size > 0 -%}
            <div
              id="Search-Result-Articles-Panel"
              class="panel"
              role="tabpanel"
              aria-labelledby="Search-Result-Articles-Tab"
              aria-hidden="true"
            >
              {%- for article in predictive_search.resources.articles -%}
                {% render 'card-article',
                  card_article: article,
                  image_width: '200px',
                  image_width_mobile: '200px',
                  show_date: true,
                  show_author: true,
                  show_horizontal: true
                %}
              {%- endfor -%}
            </div>
          {%- endif -%}
          {%- if predictive_search.resources.pages.size > 0 -%}
            <div
              id="Search-Result-Pages-Panel"
              class="panel"
              role="tabpanel"
              aria-labelledby="Search-Result-Pages-Tab"
              aria-hidden="true"
            >
              {%- for page in predictive_search.resources.pages -%}
                {% render 'card-page', card_page: page, show_horizontal: true %}
              {%- endfor -%}
            </div>
          {%- endif -%}
        </div>
      </tab-panel>
    {%- else -%}
      <div class="alert-message-wrapper">
        <div class="alert-message alert-error" role="alert">
          {{ 'templates.search.no_results' | t: terms: predictive_search.terms }}
        </div>
      </div>
    {%- endif -%}
  </div>
  {% comment %} 结果数量 {% endcomment %}
  <span class="hidden" data-predictive-search-live-region-count-value>
    {% liquid
      if total_results == 0
        echo 'templates.search.no_results' | t: terms: predictive_search.terms
      else
        echo 'templates.search.results_with_count' | t: count: total_results
      endif
    %}
  </span>
{%- endif -%}
