<div class="shopify-block image-with-text-block" {{ block.shopify_attributes }}>
  <div
    class="image-with-text-image media media--{{ section.settings.image_ratio | default: 'square' }}"
    {% if section.settings.image_ratio == 'adapt' and block.settings.image != blank %}
      {% assign ratio = 1 | divided_by: block.settings.image.aspect_ratio | times: 100 %}
      style="--ratio-percent: {{ ratio }}%;"
    {% endif %}
  >
    {% render 'lazy-image',
      image_object: block.settings.image,
      sizes: '(min-width: 750px) 500px, 100vw',
      placeholder: 'image'
    %}
  </div>
  <div class="image-with-text-content content-group group--compact text-align--{{ section.settings.text_alignment | default: 'center' }}">
    {%- if block.settings.heading != blank -%}
      <h3 class="text-content-heading h4">{{ block.settings.heading | escape }}</h3>
    {%- endif -%}
    {%- if block.settings.description != blank -%}
      <div class="text-content-description rte light">{{ block.settings.description }}</div>
    {%- endif -%}
    {%- if block.settings.button_label != blank -%}
      <a
        class="button button--small mt-2"
        {% if block.settings.button_link != blank %}
          href="{{ block.settings.button_link }}"
          {% if block.settings.open_in_new_tab %}
            target="_blank"
            rel="noopener nofollow"
          {% endif %}
        {% else %}
          role="link"
          aria-disabled="true"
        {% endif %}
      >
        {{ block.settings.button_label | escape }}
        {%- if block.settings.show_arrow -%}
          {% render 'icon-sets-basic', icon: 'right', class: 'caret-icon' %}
        {%- endif -%}
      </a>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "t:blocks._image-with-text.name",
  "tag": null,
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.all.image.image_picker.label",
      "info": "t:blocks._image-with-text.settings.image.info"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.all.text-content.heading.label",
      "default": "Add heading here"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "t:sections.all.text-content.description.label",
      "default": "<p>Add some description here</p>"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Button label",
      "label": "t:sections.all.button.button_label.label",
      "info": "t:sections.all.button.button_label.info"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "t:sections.all.button.button_link.label"
    },
    {
      "type": "checkbox",
      "id": "open_in_new_tab",
      "label": "t:sections.all.link.open_in_new_tab.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_arrow",
      "label": "t:sections.all.button.show_arrow.label",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "t:blocks._image-with-text.presets.name"
    }
  ]
}
{% endschema %}
